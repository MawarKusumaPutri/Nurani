============================================
CARA PAKAI - FOTO PROFIL FLEKSIBEL
============================================

LANGKAH 1:
----------
Double-click: FIX_FOTO_FLEKSIBEL.bat

Tunggu sampai selesai.
Script akan:
- Membuat PhotoHelper (sistem fleksibel)
- Memperbarui Controller (Guru, TU, Kepala Sekolah)
- Memperbarui View Profile
- Memperbarui Dashboard Guru
- Memperbarui Sidebar
- Update composer autoload
- Membuat folder profiles
- Clear cache Laravel


LANGKAH 2:
----------
Setelah script selesai:

1. RESTART APACHE di XAMPP:
   - Buka XAMPP Control Panel
   - Klik STOP pada Apache
   - TUNGGU 10 DETIK
   - Klik START pada Apache
   - Pastikan status Running (hijau)


LANGKAH 3:
----------
Test upload foto:

1. Login sebagai Guru/TU/Kepala Sekolah
2. Buka Edit Profil
3. Upload foto:
   - Format: JPG, PNG, GIF
   - Maksimal: 2MB
4. Klik Simpan


LANGKAH 4:
----------
Setelah klik Simpan:

1. HARD REFRESH: Ctrl + F5 (PENTING!)
2. Foto akan muncul di:
   - Sidebar (foto profil kecil)
   - Dashboard (foto profil kecil)
   - Halaman Profil (foto profil besar)


============================================
KEUNGGULAN SISTEM FLEKSIBEL:
============================================

1. TIDAK TERPAKU pada folder tertentu
   - Foto bisa disimpan di storage/app/public/profiles/
   - Atau di public/image/profiles/
   - Atau lokasi lain (fleksibel)

2. OTOMATIS mendeteksi lokasi foto
   - Sistem akan mencari foto di berbagai lokasi
   - Tidak perlu khawatir tentang path

3. FLEKSIBEL untuk berbagai lokasi
   - Mendukung path relatif dari storage
   - Mendukung path relatif dari public
   - Mendukung path absolut
   - Mendukung URL

4. MUDAH untuk maintenance
   - Satu helper function untuk semua
   - Tidak perlu mengubah kode di banyak tempat


============================================
LOKASI PENYIMPANAN FOTO:
============================================

Default (Prioritas 1):
- storage/app/public/profiles/guru/
- storage/app/public/profiles/tu/
- storage/app/public/profiles/kepala_sekolah/

Fallback (Prioritas 2):
- public/image/profiles/

Lokasi Lain:
- Sistem akan otomatis mencari di berbagai lokasi
- Tidak perlu khawatir tentang lokasi penyimpanan


============================================
CARA KERJA SISTEM:
============================================

1. Upload Foto:
   - Foto diupload melalui form
   - Sistem mencoba menyimpan di storage/app/public/profiles/
   - Jika gagal, fallback ke public/image/profiles/
   - Path disimpan di database

2. Tampilkan Foto:
   - Sistem membaca path dari database
   - PhotoHelper mencari foto di berbagai lokasi:
     * Storage (storage/app/public/)
     * Public directory (public/)
     * Path absolut
     * URL
   - Mengembalikan URL foto yang ditemukan

3. Hapus Foto:
   - Sistem mencari foto di berbagai lokasi
   - Menghapus foto yang ditemukan


============================================
JIKA FOTO MASIH TIDAK MUNCUL:
============================================

1. HARD REFRESH: Ctrl + F5 (PENTING!)

2. Cek file foto ada di:
   - storage/app/public/profiles/guru/ (untuk Guru)
   - storage/app/public/profiles/tu/ (untuk TU)
   - storage/app/public/profiles/kepala_sekolah/ (untuk Kepala Sekolah)
   - public/image/profiles/ (fallback)

3. Cek storage symlink:
   - Buka: D:\Praktikum DWBI\xampp\htdocs\nurani\public\storage
   - Harus link ke: storage\app\public
   - Jika tidak ada, jalankan: php artisan storage:link

4. Clear cache browser:
   - Ctrl + Shift + Delete
   - Pilih "Cached images and files"
   - Clear data

5. Cek console browser (F12):
   - Tab "Network" â†’ filter "Images"
   - Lihat apakah request ke foto ada
   - Status code harus 200

6. Test akses langsung foto:
   - storage: http://localhost/nurani/public/storage/profiles/guru/[nama-file]
   - public: http://localhost/nurani/public/image/profiles/[nama-file]
   - Jika muncul = path benar
   - Jika tidak = masalah storage symlink

7. Cek database:
   - Buka database
   - Tabel: gurus (untuk Guru) atau users (untuk TU/Kepala Sekolah)
   - Kolom: foto (untuk Guru) atau photo (untuk TU/Kepala Sekolah)
   - Pastikan ada nilai di kolom tersebut
   - Path bisa berupa: profiles/guru/xxx.jpg atau image/profiles/xxx.jpg

8. Jika masih tidak muncul:
   - Jalankan script lagi: FIX_FOTO_FLEKSIBEL.bat
   - Restart Apache lagi
   - Clear cache browser lagi
   - Hard refresh lagi: Ctrl + F5


============================================
CATATAN PENTING:
============================================

1. Sistem ini FLEKSIBEL - tidak terpaku pada folder tertentu
2. Foto akan otomatis dicari di berbagai lokasi
3. Tidak perlu khawatir tentang lokasi penyimpanan
4. Sistem akan otomatis menangani path yang berbeda
5. Mudah untuk maintenance dan update


============================================

