============================================
CARA PAKAI SISTEM SINKRON FOTO PROFIL
============================================

KEUNGGULAN SISTEM BARU:
-----------------------
✓ OTOMATIS mencari foto di semua lokasi
✓ SINKRON antara sidebar dan halaman profil
✓ Foto muncul OTOMATIS setelah upload
✓ Tidak perlu update manual di database
✓ Mendukung berbagai format path
✓ Foto lama tetap muncul (otomatis dicari)


============================================
CARA PAKAI:
============================================

LANGKAH 1: Jalankan Script Perbaikan
-------------------------------------
1. Double-click: FIX_SINKRON_FOTO_PROFIL.bat
2. Tunggu sampai selesai
3. Script akan:
   - Memperbarui semua sidebar (TU, Guru, Kepala Sekolah)
   - Memperbarui PhotoHelper (otomatis cari file)
   - Membuat ulang storage symlink
   - Clear cache


LANGKAH 2: Restart Apache
--------------------------
1. Buka XAMPP Control Panel
2. STOP Apache
3. TUNGGU 10 DETIK
4. START Apache
5. Pastikan status Running (hijau)


LANGKAH 3: Upload Foto Profil (OTOMATIS - SINKRON)
----------------------------------------------------
1. Login sebagai Guru/TU/Kepala Sekolah
2. Buka Edit Profil
3. Pilih foto (Format: JPG, PNG, GIF, Maksimal 2MB)
4. Klik Simpan
5. Foto akan muncul OTOMATIS di:
   - Sidebar (lingkaran item yang dilingkari)
   - Halaman Profil
   - Dashboard
   - Semua halaman yang menggunakan sidebar


LANGKAH 4: Hard Refresh Browser
---------------------------------
1. Tekan Ctrl + F5
2. Foto akan muncul OTOMATIS di semua tempat
3. SINKRON antara sidebar dan halaman profil


============================================
BAGI FOTO LAMA YANG SUDAH ADA:
============================================

Sistem akan OTOMATIS mencari file berdasarkan nama:
- Tidak peduli format path di database
- Cari di semua kemungkinan lokasi:
  * profiles/tu/[nama-file]
  * profiles/guru/[nama-file]
  * profiles/kepala_sekolah/[nama-file]
  * photos/[nama-file]
  * guru/foto/[nama-file]
  * image/profiles/[nama-file]

Jadi foto lama akan tetap muncul OTOMATIS di:
- Sidebar (lingkaran item)
- Halaman Profil
- Dashboard
- Semua halaman yang menggunakan sidebar


============================================
CONTOH:
============================================

CONTOH 1: Upload Foto Baru
---------------------------
1. Login sebagai TU
2. Edit Profil → Pilih foto → Simpan
3. Path otomatis disimpan: profiles/tu/1234567890_abc123_foto.jpg
4. Foto langsung muncul di:
   - Sidebar (lingkaran item) ✓
   - Halaman Profil ✓
   - Dashboard ✓
   - Semua halaman ✓


CONTOH 2: Foto Lama dengan Path Berbeda
----------------------------------------
Path di database: photos/1234567890_abc123_foto.jpg (format lama)
File ada di: storage/app/public/profiles/tu/1234567890_abc123_foto.jpg

Sistem akan OTOMATIS:
1. Ambil nama file: 1234567890_abc123_foto.jpg
2. Cari di semua lokasi
3. Temukan di: profiles/tu/1234567890_abc123_foto.jpg
4. Tampilkan foto di:
   - Sidebar (lingkaran item) ✓
   - Halaman Profil ✓
   - Dashboard ✓
   - Semua halaman ✓


CONTOH 3: Path Hanya Nama File
--------------------------------
Path di database: 1234567890_abc123_foto.jpg (hanya nama file)
File ada di: storage/app/public/profiles/tu/1234567890_abc123_foto.jpg

Sistem akan OTOMATIS:
1. Ambil nama file: 1234567890_abc123_foto.jpg
2. Cari di semua lokasi
3. Temukan di: profiles/tu/1234567890_abc123_foto.jpg
4. Tampilkan foto di:
   - Sidebar (lingkaran item) ✓
   - Halaman Profil ✓
   - Dashboard ✓
   - Semua halaman ✓


============================================
SINKRONISASI:
============================================

Sistem sekarang SINKRON:
✓ Upload foto → Path disimpan otomatis
✓ Sidebar → Otomatis cari foto dan tampilkan
✓ Halaman Profil → Otomatis cari foto dan tampilkan
✓ Dashboard → Otomatis cari foto dan tampilkan
✓ Semua halaman → Otomatis cari foto dan tampilkan
✓ Tidak perlu update manual di database
✓ Foto lama tetap muncul (otomatis dicari)


============================================
JIKA MASIH TIDAK MUNCUL:
============================================

1. Pastikan file foto ada di folder:
   - storage/app/public/profiles/tu/ (untuk TU)
   - storage/app/public/profiles/guru/ (untuk Guru)
   - storage/app/public/profiles/kepala_sekolah/ (untuk Kepala Sekolah)

2. Pastikan storage symlink ada:
   - Jalankan: php artisan storage:link

3. Hard refresh browser: Ctrl + F5

4. Cek console browser (F12) untuk error

5. Test akses foto langsung:
   - http://localhost/nurani/public/storage/profiles/tu/[nama-file]

6. Pastikan sudah restart Apache


============================================
KESIMPULAN:
============================================

Sistem sekarang OTOMATIS dan SINKRON:
✓ Upload foto → Path disimpan otomatis
✓ Tampilkan foto → Otomatis cari file berdasarkan nama
✓ Sidebar dan halaman profil → SINKRON
✓ Tidak perlu update manual di database
✓ Foto lama tetap muncul (otomatis dicari)

TIDAK PERLU LAGI UPDATE MANUAL!

============================================

