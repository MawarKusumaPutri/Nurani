@echo off
echo Membuat tabel materi_pembelajaran...
cd /d "%~dp0"
php -r "try { $pdo = new PDO('mysql:host=localhost;dbname=nurani', 'root', ''); $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); $result = $pdo->query('SHOW TABLES LIKE \"materi_pembelajaran\"'); if ($result->rowCount() > 0) { echo 'SUCCESS: Tabel materi_pembelajaran sudah ada\n'; } else { echo 'INFO: Membuat tabel materi_pembelajaran...\n'; $pdo->exec('CREATE TABLE IF NOT EXISTS `materi_pembelajaran` (`id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, `guru_id` bigint(20) UNSIGNED NOT NULL, `mata_pelajaran` varchar(255) NOT NULL, `identitas_mata_pelajaran` text DEFAULT NULL, `profil_sejarah` text DEFAULT NULL, `relevansi` text DEFAULT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `materi_pembelajaran_guru_id_mata_pelajaran_unique` (`guru_id`, `mata_pelajaran`), KEY `materi_pembelajaran_guru_id_foreign` (`guru_id`), CONSTRAINT `materi_pembelajaran_guru_id_foreign` FOREIGN KEY (`guru_id`) REFERENCES `gurus` (`id`) ON DELETE CASCADE) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci'); echo 'SUCCESS: Tabel materi_pembelajaran berhasil dibuat\n'; } } catch (Exception $e) { echo 'ERROR: ' . $e->getMessage() . '\n'; }"
pause
